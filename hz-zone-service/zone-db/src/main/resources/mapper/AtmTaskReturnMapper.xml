<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zcxd.db.mapper.AtmTaskReturnMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.zcxd.db.model.AtmTaskReturn">
        <id column="id" property="id" />
        <result column="task_id" property="taskId" />
        <result column="atm_id" property="atmId" />
        <result column="bank_id" property="bankId" />
        <result column="route_id" property="routeId" />
        <result column="box_rfid_qrno" property="boxRfidQrno" />
        <result column="carry_type" property="carryType" />
        <result column="task_date" property="taskDate" />
        <result column="create_time" property="createTime" />
        <result column="update_time" property="updateTime" />
    </resultMap>


    <!-- 分页获取清机回笼信息 -->
    <select id="findListByPage" resultType="com.zcxd.db.model.AtmTaskReturn">
        SELECT * from atm_task_return tr inner join route r on tr.route_id = r.id
        where r.department_id = #{departmentId}
        <if test="boxBarCode != null and boxBarCode != ''" >
         	AND tr.box_bar_code = #{boxBarCode}
        </if>
        order by tr.create_time desc
        limit #{page}, #{limit}
    </select>
</mapper>
